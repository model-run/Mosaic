(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8449:function(e,s,r){Promise.resolve().then(r.bind(r,2649))},2649:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return u}});var t=r(7501),a=r(752);let n=[{id:"llama-7b",name:"LLaMA-7B",size:"7B",minMemory:14,cudaVersion:"11.8+",supportedEngines:["vllm","tensorrt-llm","transformers"],category:"llm",description:"Meta 开源的大语言模型，7B 参数版本"},{id:"llama-13b",name:"LLaMA-13B",size:"13B",minMemory:26,cudaVersion:"11.8+",supportedEngines:["vllm","tensorrt-llm","transformers"],category:"llm",description:"Meta 开源的大语言模型，13B 参数版本"},{id:"llama-70b",name:"LLaMA-70B",size:"70B",minMemory:140,cudaVersion:"11.8+",supportedEngines:["vllm","tensorrt-llm"],category:"llm",description:"Meta 开源的大语言模型，70B 参数版本"},{id:"chatglm-6b",name:"ChatGLM-6B",size:"6B",minMemory:12,cudaVersion:"11.7+",supportedEngines:["transformers","vllm"],category:"llm",description:"智谱 AI 开源的中文对话模型"},{id:"chatglm-32b",name:"ChatGLM-32B",size:"32B",minMemory:64,cudaVersion:"11.7+",supportedEngines:["transformers","vllm"],category:"llm",description:"智谱 AI 开源的中文对话模型，32B 参数版本"},{id:"qwen-7b",name:"Qwen-7B",size:"7B",minMemory:14,cudaVersion:"11.8+",supportedEngines:["vllm","transformers"],category:"llm",description:"阿里云开源的通义千问模型"},{id:"qwen-14b",name:"Qwen-14B",size:"14B",minMemory:28,cudaVersion:"11.8+",supportedEngines:["vllm","transformers"],category:"llm",description:"阿里云开源的通义千问模型，14B 参数版本"},{id:"mistral-7b",name:"Mistral-7B",size:"7B",minMemory:14,cudaVersion:"11.8+",supportedEngines:["vllm","transformers"],category:"llm",description:"Mistral AI 开源的高效语言模型"},{id:"stable-diffusion-xl",name:"Stable Diffusion XL",size:"6.6B",minMemory:8,cudaVersion:"11.8+",supportedEngines:["transformers","diffusers"],category:"vision",description:"Stability AI 开源的图像生成模型"},{id:"stable-diffusion-2.1",name:"Stable Diffusion 2.1",size:"1.1B",minMemory:4,cudaVersion:"11.7+",supportedEngines:["transformers","diffusers"],category:"vision",description:"Stability AI 开源的图像生成模型"},{id:"llava-7b",name:"LLaVA-7B",size:"7B",minMemory:16,cudaVersion:"11.8+",supportedEngines:["transformers"],category:"multimodal",description:"多模态视觉语言模型，支持图像理解和对话"},{id:"llava-13b",name:"LLaVA-13B",size:"13B",minMemory:28,cudaVersion:"11.8+",supportedEngines:["transformers"],category:"multimodal",description:"多模态视觉语言模型，13B 参数版本"}],l=[{id:"vllm",name:"vLLM",description:"高性能大语言模型推理引擎，支持连续批处理和 PagedAttention",dockerImage:"vllm/vllm-openai:latest",supportedGPUs:["rtx-4090","rtx-4080","rtx-4070","rtx-3090","rtx-3080","a100-40gb","a100-80gb","h100-80gb"],features:["连续批处理","PagedAttention","动态批处理","多 GPU 支持","OpenAI 兼容 API"]},{id:"tensorrt-llm",name:"TensorRT-LLM",description:"NVIDIA 优化的推理引擎，针对 NVIDIA GPU 深度优化",dockerImage:"nvcr.io/nvidia/tensorrt-llm:latest",supportedGPUs:["rtx-4090","rtx-4080","rtx-4070","rtx-3090","rtx-3080","a100-40gb","a100-80gb","h100-80gb","v100-16gb"],features:["TensorRT 优化","量化支持","多 GPU 并行","动态形状","高性能推理"]},{id:"transformers",name:"Transformers",description:"Hugging Face 标准推理库，兼容性最好，易于调试",dockerImage:"huggingface/transformers-pytorch-gpu:latest",supportedGPUs:["rtx-4090","rtx-4080","rtx-4070","rtx-3090","rtx-3080","a100-40gb","a100-80gb","h100-80gb","v100-16gb","rtx-3060"],features:["广泛兼容","易于调试","丰富模型支持","量化支持","社区活跃"]},{id:"ollama",name:"Ollama",description:"本地部署工具，支持多种模型格式，使用简单",dockerImage:"ollama/ollama:latest",supportedGPUs:["rtx-4090","rtx-4080","rtx-4070","rtx-3090","rtx-3080","a100-40gb","a100-80gb","h100-80gb","rtx-3060"],features:["简单易用","自动模型管理","RESTful API","多模型支持","本地部署"]}],i=[{id:"rtx-4090",name:"NVIDIA RTX 4090",memory:24,cudaCapability:"8.9",recommendedEngines:["vllm","tensorrt-llm","transformers"],tier:"high"},{id:"rtx-4080",name:"NVIDIA RTX 4080",memory:16,cudaCapability:"8.9",recommendedEngines:["vllm","tensorrt-llm","transformers"],tier:"high"},{id:"rtx-4070",name:"NVIDIA RTX 4070",memory:12,cudaCapability:"8.9",recommendedEngines:["vllm","transformers"],tier:"mid"},{id:"rtx-3090",name:"NVIDIA RTX 3090",memory:24,cudaCapability:"8.6",recommendedEngines:["vllm","tensorrt-llm","transformers"],tier:"high"},{id:"rtx-3080",name:"NVIDIA RTX 3080",memory:10,cudaCapability:"8.6",recommendedEngines:["vllm","transformers"],tier:"mid"},{id:"a100-40gb",name:"NVIDIA A100 40GB",memory:40,cudaCapability:"8.0",recommendedEngines:["vllm","tensorrt-llm","transformers"],tier:"professional"},{id:"a100-80gb",name:"NVIDIA A100 80GB",memory:80,cudaCapability:"8.0",recommendedEngines:["vllm","tensorrt-llm","transformers"],tier:"professional"},{id:"v100-16gb",name:"NVIDIA V100 16GB",memory:16,cudaCapability:"7.0",recommendedEngines:["transformers","tensorrt-llm"],tier:"professional"},{id:"h100-80gb",name:"NVIDIA H100 80GB",memory:80,cudaCapability:"9.0",recommendedEngines:["vllm","tensorrt-llm","transformers"],tier:"professional"},{id:"rtx-3060",name:"NVIDIA RTX 3060",memory:12,cudaCapability:"8.6",recommendedEngines:["transformers"],tier:"entry"}];function o(e){let{selectedGPU:s,onGPUChange:r}=e,[n,l]=(0,a.useState)(!1),o=e=>{switch(e){case"entry":return"bg-green-100 text-green-800";case"mid":return"bg-blue-100 text-blue-800";case"high":return"bg-purple-100 text-purple-800";case"professional":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},c=e=>{switch(e){case"entry":return"入门级";case"mid":return"中端";case"high":return"高端";case"professional":return"专业级";default:return"未知"}};return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"选择 GPU"}),(0,t.jsxs)("button",{type:"button",onClick:()=>l(!n),className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[s?(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:s.name}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[s.memory,"GB 显存 • CUDA ",s.cudaCapability]})]}),(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(o(s.tier)),children:c(s.tier)})]}):(0,t.jsx)("span",{className:"text-gray-500",children:"请选择 GPU..."}),(0,t.jsx)("svg",{className:"ml-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&(0,t.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:i.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{r(e),l(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 focus:bg-gray-50 focus:outline-none",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[e.memory,"GB 显存 • CUDA ",e.cudaCapability]})]}),(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(o(e.tier)),children:c(e.tier)})]})},e.id))})]})}function c(e){let{selectedModel:s,onModelChange:r,availableModels:l=n}=e,[i,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(""),m=l.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.description.toLowerCase().includes(c.toLowerCase())),x=e=>{switch(e){case"llm":return"bg-blue-100 text-blue-800";case"vision":return"bg-green-100 text-green-800";case"multimodal":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},u=e=>{switch(e){case"llm":return"大语言模型";case"vision":return"图像生成";case"multimodal":return"多模态";default:return"其他"}};return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"选择模型"}),(0,t.jsxs)("button",{type:"button",onClick:()=>o(!i),className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[s?(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:s.name}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[s.size," • 最低 ",s.minMemory,"GB 显存"]})]}),(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(x(s.category)),children:u(s.category)})]}):(0,t.jsx)("span",{className:"text-gray-500",children:"请选择模型..."}),(0,t.jsx)("svg",{className:"ml-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&(0,t.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-80 overflow-hidden",children:[(0,t.jsx)("div",{className:"p-3 border-b border-gray-200",children:(0,t.jsx)("input",{type:"text",placeholder:"搜索模型...",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})}),(0,t.jsxs)("div",{className:"max-h-60 overflow-auto",children:[m.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{r(e),o(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 focus:bg-gray-50 focus:outline-none",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 mb-1",children:[e.size," • 最低 ",e.minMemory,"GB 显存 • CUDA ",e.cudaVersion]}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:e.description})]}),(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(x(e.category)),children:u(e.category)})]})},e.id)),0===m.length&&(0,t.jsx)("div",{className:"px-4 py-3 text-gray-500 text-center",children:"未找到匹配的模型"})]})]})]})}function d(e){let{selectedEngine:s,onEngineChange:r,availableEngines:n=l}=e,[i,o]=(0,a.useState)(!1);return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"选择推理引擎"}),(0,t.jsxs)("button",{type:"button",onClick:()=>o(!i),className:"w-full bg-white border border-gray-300 rounded-lg px-4 py-3 text-left focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[s?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:s.name}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:s.description})]}):(0,t.jsx)("span",{className:"text-gray-500",children:"请选择推理引擎..."}),(0,t.jsx)("svg",{className:"ml-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&(0,t.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto",children:n.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{r(e),o(!1)},className:"w-full px-4 py-3 text-left hover:bg-gray-50 focus:bg-gray-50 focus:outline-none",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:e.description}),(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:[(0,t.jsxs)("div",{className:"mb-1",children:["Docker 镜像: ",e.dockerImage]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.features.map((e,s)=>(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:e},s))})]})]})},e.id))})]})}function m(e){let{gpu:s,model:r,engine:n,onParametersChange:l}=e,[i,o]=(0,a.useState)({batchSize:1,maxSeqLen:2048,useFp16:!0,gpuMemoryUtilization:.8,tensorParallelSize:1,port:8e3,modelPath:"/models"});(0,a.useEffect)(()=>{if(s&&r){var e;let t=(e=s.id,r.id,null==n||n.id,({"rtx-4090":{batchSize:4,maxSeqLen:4096,gpuMemoryUtilization:.9,tensorParallelSize:1},"rtx-4080":{batchSize:2,maxSeqLen:4096,gpuMemoryUtilization:.8,tensorParallelSize:1},"rtx-4070":{batchSize:1,maxSeqLen:2048,gpuMemoryUtilization:.8,tensorParallelSize:1},"a100-40gb":{batchSize:8,maxSeqLen:8192,gpuMemoryUtilization:.9,tensorParallelSize:1},"a100-80gb":{batchSize:16,maxSeqLen:8192,gpuMemoryUtilization:.9,tensorParallelSize:1}})[e]||{batchSize:1,maxSeqLen:2048,gpuMemoryUtilization:.8,tensorParallelSize:1});o(e=>({...e,...t,modelPath:"/models/".concat(r.id)}))}},[s,r,n]),(0,a.useEffect)(()=>{l(i)},[i,l]);let c=(e,s)=>{o(r=>({...r,[e]:s}))};return(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"参数配置"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"批处理大小"}),(0,t.jsx)("input",{type:"number",min:"1",max:"32",value:i.batchSize,onChange:e=>c("batchSize",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"同时处理的请求数量，影响显存使用和吞吐量"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大序列长度"}),(0,t.jsxs)("select",{value:i.maxSeqLen,onChange:e=>c("maxSeqLen",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,t.jsx)("option",{value:1024,children:"1024"}),(0,t.jsx)("option",{value:2048,children:"2048"}),(0,t.jsx)("option",{value:4096,children:"4096"}),(0,t.jsx)("option",{value:8192,children:"8192"}),(0,t.jsx)("option",{value:16384,children:"16384"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"模型能处理的最大输入长度"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["GPU 内存利用率: ",Math.round(100*i.gpuMemoryUtilization),"%"]}),(0,t.jsx)("input",{type:"range",min:"0.1",max:"0.95",step:"0.05",value:i.gpuMemoryUtilization,onChange:e=>c("gpuMemoryUtilization",parseFloat(e.target.value)),className:"w-full"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"分配给模型推理的 GPU 内存比例"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"张量并行大小"}),(0,t.jsxs)("select",{value:i.tensorParallelSize,onChange:e=>c("tensorParallelSize",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,t.jsx)("option",{value:1,children:"1 (单 GPU)"}),(0,t.jsx)("option",{value:2,children:"2 (双 GPU)"}),(0,t.jsx)("option",{value:4,children:"4 (四 GPU)"}),(0,t.jsx)("option",{value:8,children:"8 (八 GPU)"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"用于模型并行推理的 GPU 数量"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"服务端口"}),(0,t.jsx)("input",{type:"number",min:"1000",max:"65535",value:i.port,onChange:e=>c("port",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"API 服务监听的端口号"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"模型路径"}),(0,t.jsx)("input",{type:"text",value:i.modelPath,onChange:e=>c("modelPath",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"模型文件在容器内的路径"})]})]}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"useFp16",checked:i.useFp16,onChange:e=>c("useFp16",e.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"useFp16",className:"ml-2 block text-sm text-gray-700",children:"使用 FP16 精度 (减少显存使用，可能影响精度)"})]})})]})})}function x(e){let{gpu:s,model:r,engine:n,parameters:l}=e,[i,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),m=async()=>{if(!s||!r||!n){alert("请先选择 GPU、模型和推理引擎");return}d(!0);try{let e=function(e){let{gpu:s,model:r,engine:t,parameters:a}=e,n="docker run --gpus all",l=["-p ".concat(a.port,":").concat(a.port)],i=["-v /my/models:".concat(a.modelPath),"-v /tmp/.X11-unix:/tmp/.X11-unix:rw"],o={CUDA_VISIBLE_DEVICES:"0",NVIDIA_VISIBLE_DEVICES:"all",NVIDIA_DRIVER_CAPABILITIES:"compute,utility"},c=[];switch(t.id){case"vllm":n+=" \\\n  ".concat(l.join(" \\\n  ")," \\\n  ").concat(i.join(" \\\n  ")," \\\n  ").concat(t.dockerImage),c=["--model ".concat(a.modelPath,"/").concat(r.id),"--tensor-parallel-size ".concat(a.tensorParallelSize),"--gpu-memory-utilization ".concat(a.gpuMemoryUtilization),"--max-model-len ".concat(a.maxSeqLen),"--host 0.0.0.0","--port ".concat(a.port)],a.useFp16&&c.push("--dtype half");break;case"tensorrt-llm":n+=" \\\n  ".concat(l.join(" \\\n  ")," \\\n  ").concat(i.join(" \\\n  ")," \\\n  ").concat(t.dockerImage),c=["--model_dir ".concat(a.modelPath,"/").concat(r.id),"--max_batch_size ".concat(a.batchSize),"--max_input_len ".concat(a.maxSeqLen),"--max_output_len ".concat(a.maxSeqLen),"--host 0.0.0.0","--port ".concat(a.port)];break;case"transformers":n+=" \\\n  ".concat(l.join(" \\\n  ")," \\\n  ").concat(i.join(" \\\n  ")," \\\n  ").concat(t.dockerImage),c=["python -m transformers.pipeline","--model_name_or_path ".concat(a.modelPath,"/").concat(r.id),"--device_map auto","--torch_dtype ".concat(a.useFp16?"float16":"float32"),"--max_length ".concat(a.maxSeqLen),"--batch_size ".concat(a.batchSize)];break;case"ollama":n+=" \\\n  ".concat(l.join(" \\\n  ")," \\\n  ").concat(i.join(" \\\n  ")," \\\n  ").concat(t.dockerImage),c=["serve","--host 0.0.0.0:".concat(a.port)]}let d=Object.entries(o).map(e=>{let[s,r]=e;return"-e ".concat(s,"=").concat(r)}).join(" \\\n  ");return d&&(n=n.replace(t.dockerImage,"".concat(d," \\\n  ").concat(t.dockerImage))),c.length>0&&(n+=" \\\n  ".concat(c.join(" \\\n  "))),{dockerCommand:n,environmentVariables:o,volumeMounts:i,portMappings:l,gpuConfig:"--gpus all",additionalFlags:c}}({gpu:s,model:r,engine:n,parameters:l});o(e)}catch(e){console.error("生成命令时出错:",e),alert("生成命令时出错，请检查配置")}finally{d(!1)}},x=async e=>{try{await navigator.clipboard.writeText(e),alert("命令已复制到剪贴板")}catch(r){console.error("复制失败:",r);let s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),alert("命令已复制到剪贴板")}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"生成的 Docker 命令"}),(0,t.jsx)("button",{onClick:m,disabled:!s||!r||!n||c,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:c?"生成中...":"生成命令"})]}),i&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Docker 启动命令"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("pre",{className:"code-block whitespace-pre-wrap",children:i.dockerCommand}),(0,t.jsx)("button",{onClick:()=>x(i.dockerCommand),className:"absolute top-2 right-2 btn-secondary text-xs",children:"复制"})]})]}),Object.keys(i.environmentVariables).length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"环境变量"}),(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:Object.entries(i.environmentVariables).map(e=>{let[s,r]=e;return(0,t.jsxs)("div",{className:"text-sm font-mono",children:[(0,t.jsx)("span",{className:"text-blue-600",children:s}),"=",(0,t.jsxs)("span",{className:"text-green-600",children:['"',r,'"']})]},s)})})]}),i.volumeMounts.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"卷挂载"}),(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:i.volumeMounts.map((e,s)=>(0,t.jsx)("div",{className:"text-sm font-mono",children:e},s))})]}),i.portMappings.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"端口映射"}),(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:i.portMappings.map((e,s)=>(0,t.jsx)("div",{className:"text-sm font-mono",children:e},s))})]}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"使用说明"}),(0,t.jsxs)("ol",{className:"text-sm text-blue-800 space-y-1",children:[(0,t.jsx)("li",{children:"1. 确保已安装 Docker 和 NVIDIA Container Toolkit"}),(0,t.jsx)("li",{children:"2. 将模型文件放置在本地目录（如 /my/models）"}),(0,t.jsx)("li",{children:"3. 复制上述命令到终端运行"}),(0,t.jsx)("li",{children:"4. 等待容器启动完成"}),(0,t.jsxs)("li",{children:["5. 通过 http://localhost:",l.port," 访问服务"]})]})]})]}),s&&r&&n?null:(0,t.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,t.jsx)("p",{className:"text-yellow-800 text-sm",children:"请先选择 GPU、模型和推理引擎，然后点击“生成命令”按钮"})})]})}function u(){let[e,s]=(0,a.useState)(null),[r,i]=(0,a.useState)(null),[u,h]=(0,a.useState)(null),[p,g]=(0,a.useState)(null);return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"ModelRun.io"})}),(0,t.jsx)("div",{className:"ml-4",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"模型运行参数生成与部署助手"})})]}),(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsx)("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 hover:text-gray-700",children:(0,t.jsx)("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})})})]})})}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"配置选择"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(o,{selectedGPU:e,onGPUChange:s}),(0,t.jsx)(c,{selectedModel:r,onModelChange:i,availableModels:e?n.filter(s=>s.minMemory<=e.memory&&s.supportedEngines.some(e=>!u||e===u.id)):[]}),(0,t.jsx)(d,{selectedEngine:u,onEngineChange:h,availableEngines:(()=>{if(!e)return[];let s=l.filter(s=>s.supportedGPUs.includes(e.id));return r?s.filter(e=>r.supportedEngines.includes(e.id)):s})()})]})]}),e&&r&&u&&(0,t.jsx)("div",{className:"card",children:(0,t.jsx)(m,{gpu:e,model:r,engine:u,onParametersChange:g})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"card",children:(0,t.jsx)(x,{gpu:e,model:r,engine:u,parameters:p})}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"功能特性"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:"显卡识别"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"自动匹配 GPU 和推理引擎"})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:"参数模板"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"内置主流模型配置"})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m0 0V1a1 1 0 011-1h2a1 1 0 011 1v18a1 1 0 01-1 1H4a1 1 0 01-1-1V4a1 1 0 011-1h2a1 1 0 011 1v3m0 0h8"})})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:"Docker 命令"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"一键生成启动命令"})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:"规格对照"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"显存需求和 CUDA 版本"})]})]})]})]})]})]})}),(0,t.jsx)("footer",{className:"bg-white border-t border-gray-200 mt-16",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"text-center text-gray-500 text-sm",children:[(0,t.jsx)("p",{children:"\xa9 2024 ModelRun.io - 模型运行参数生成与部署助手"}),(0,t.jsx)("p",{className:"mt-2",children:"支持主流 GPU 和推理引擎，让 AI 模型部署更简单"})]})})})]})}}},function(e){e.O(0,[23,749,744],function(){return e(e.s=8449)}),_N_E=e.O()}]);